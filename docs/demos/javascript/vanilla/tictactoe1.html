<!DOCTYPE html> 
<html lang="en"> 
<head> 
<meta charset="UTF-8" /> 
<meta name="viewport" content="width=device-width, initial-scale=1.0" /> 
<title>Tic Tac Toe Smaug</title> 
<style> 
    #canvas { 
        border: 1px solid black; 
    } 
</style> 
</head> 
<body> 
<canvas id="canvas" width="300" height="300"></canvas> 
<script> 
// Getting the canvas element and setting it up 
let canvas = document.getElementById('canvas'); 
let ctx = canvas.getContext('2d'); 
 
// Setting up the dimensions and other constants 
const cellSize = 100; 
const boardSize = 3; // Tic Tac Toe is a 3x3 game 
const winCondition = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]]; 
const player = 'X'; 
const computer = 'O'; 
 
// Board state 
let board = new Array(9).fill(null); 
 
// Drawing the game grid 
function drawGrid() { 
    for (let i = 1; i < boardSize; i++) { 
        ctx.beginPath(); 
        ctx.moveTo(cellSize * i, 0); 
        ctx.lineTo(cellSize * i, canvas.height); 
        ctx.stroke(); 
 
        ctx.beginPath(); 
        ctx.moveTo(0, cellSize * i); 
        ctx.lineTo(canvas.width, cellSize * i); 
        ctx.stroke(); 
    } 
} 
 
// Drawing the current state of the board 
function drawBoard() { 
    for (let i = 0; i < board.length; i++) { 
        if (board[i] === player) { 
            ctx.beginPath(); 
            ctx.arc((i % 3 + 0.5) * cellSize, Math.floor(i / 3) * cellSize + cellSize / 2, cellSize / 3, 0, 2 * Math.PI); 
            ctx.fillStyle = 'blue'; 
            ctx.fill(); 
        } else if (board[i] === computer) { 
            ctx.beginPath(); 
            ctx.arc((i % 3 + 0.5) * cellSize, Math.floor(i / 3) * cellSize + cellSize / 2, cellSize / 3, 0, 2 * Math.PI); 
            ctx.fillStyle = 'red'; 
            ctx.fill(); 
        } 
    } 
} 
 
// Checking for a win 
function checkWin() { 
    for (let condition of winCondition) { 
        let a = board[condition[0]]; 
        let b = board[condition[1]]; 
        let c = board[condition[2]]; 
 
        if (a !== null && a === b && a === c) { 
            return a; 
        } 
    } 
    return null; 
} 
 
// AI logic to decide the next move 
function aiMove() { 
    let bestScore = -Infinity; 
    let bestMove; 
 
    for (let i = 0; i < board.length; i++) { 
        if (board[i] === null) { 
            board[i] = computer; 
            let score = minimax(board, 0, false); 
            board[i] = null; // Reset the move 
 
            if (score > bestScore) { 
                bestScore = score; 
                bestMove = i; 
            } 
        } 
    } 
 
    board[bestMove] = computer; 
} 
 
// Minimax algorithm 
function minimax(board, depth, isMaximizing) { 
    let result = checkWin(); 
    if (result !== null) { 
        return result === player ? -1 : 1; // Player win -> -1, Computer win -> 1 
    } 
 
    if (isMaximizing) { // Maximizing for the computer 
        let bestScore = -Infinity; 
 
        for (let i = 0; i < board.length; i++) { 
            if (board[i] === null) { 
                board[i] = computer; 
                let score = minimax(board, depth + 1, false); 
                board[i] = null; // Reset the move 
 
                bestScore = Math.max(score, bestScore); 
            } 
        } 
 
        return bestScore; 
    } else { // Minimizing for the player 
        let bestScore = Infinity; 
 
        for (let i = 0; i < board.length; i++) { 
            if (board[i] === null) { 
                board[i] = player; 
                let score = minimax(board, depth + 1, true); 
                board[i] = null; // Reset the move 
 
                bestScore = Math.min(score, bestScore); 
            } 
        } 
 
        return bestScore; 
    } 
} 
 
// Event listener to handle user clicks 
canvas.addEventListener('click', (e) => { 
    let x = e.clientX - canvas.offsetLeft; 
    let y = e.clientY - canvas.offsetTop; 
 
    let cellX = Math.floor(x / cellSize); 
    let cellY = Math.floor(y / cellSize); 
 
    let index = cellY * 3 + cellX; 
 
    if (board[index] === null) { 
        board[index] = player; // Mark the move for the user 
 
        drawBoard(); 
 
        let winner = checkWin(); 
        if (winner !== null) { 
            alert(`Player ${winner} wins!`); 
            return; 
        } 
 
        aiMove(); // Make a move for the computer 
        drawBoard(); 
 
        winner = checkWin(); 
        if (winner !== null) { 
            alert(`Player ${winner} wins!`); 
        } 
    } 
}); 
 
// Main game loop 
function update() { 
    ctx.clearRect(0, 0, canvas.width, canvas.height); 
    drawGrid(); 
    drawBoard(); 
} 
 
update(); // Initialize the game 
 
</script> <!-- Assuming the JavaScript code is in script.js --> 
</body> 
</html>
